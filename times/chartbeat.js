(function(){var e=true,h,i=this;function l(){var a=m(),b;if(a)b=a._cb_cp,a._cb_cp="";else if(/_cb_cp[a-z0-9]{16}/.test(i.name))b=i.name.substr(6),i.name="";return b};function n(){this.a=i._sf_async_config||{};this.z=p(this,this.F);this.f=[];q(this);t(i,"unload",p(this,this.D));for(var a=0,b;b=(i._cbq||[])[a];++a)this.t(b);i._cbq={push:p(this,this.t)}}h=n.prototype;h.t=function(a){this.a[a[0]]=a[1];this.g=0};function p(a,b){return function(){b.apply(a,arguments)}}function u(){var a,b,c;a="";for(c=0;c<16;c++)b=Math.floor(Math.random()*36).toString(36),a+=b;return a}
function v(a){var b={};if(a){a.charAt(0)=="?"&&(a=a.substring(1));for(var a=a.replace("+"," "),a=a.split(/[&;]/g),c=0;c<a.length;c++){var d=a[c].split("=");b[decodeURIComponent(d[0])]=decodeURIComponent(d[1])}}return b}function w(a,b,c,d){var f="",g=i.location.href.split("?");g.length&&(g=v(g[1]),a=a.a[d]||c,g[a]&&(f="&"+b+"="+g[a]));return f}function x(a,b,c){a.a[b]=a.a[b]||c}function A(a){if(!B("_SUPERFLY_nosample"))a.B?a.l():(a.B=e,!i._sf_async_config&&!i._cbq?t(i,"load",p(a,a.l)):a.l())}
function q(a){a.g=0;a.k=0;a.n=0;a.u=C();a.m=e;a.i=null;a.p=72E5;for(var b=document.getElementsByTagName("script"),c=0;c<b.length;c++)if(b[c].src.match(/(chartbeat|chartbeatdev|chartbeat_raw).js/)){var d=b[c];break}d&&(b=v(d.src.split("?")[1]),x(a,"uid",b.uid),x(a,"domain",b.domain));b=i.location;x(a,"pingServer","ping.chartbeat.net");x(a,"title",document.title);x(a,"domain",b.host);a:{c=null;if(a.a.useCanonical){for(var c=null,d=document.getElementsByTagName("link"),f=0;f<d.length;++f)if(d[f].rel==
"canonical")c=d[f].href,c=c.substring(c.indexOf("/",9));if(c)break a}f=i.location;c=f.pathname+(f.search||"");c=c.replace(/PHPSESSID=[^&]+/,"");d=/&utm_[^=]+=[^&]+/ig;(f=d.exec(f.search))&&(c=c.replace(d,""));d=/\?utm_[^=]+=[^&]+(.*)/i;(f=d.exec(c))&&(c=c.replace(d,f[1]!=""?"?"+f[1]:""))}x(a,"path",c);c=parseInt(a.a.sessionLength,10);if(!isNaN(c))a.p=c*6E4;a.s=u();a.o=b.host;a.o=a.o.replace(/^www\./,"");a.a.domain=a.a.domain.replace(/^www\./,"");a.c=B("_chartbeat2");var b=C()-parseInt((a.c||"").split(".")[1]||
0,10),f=C(),g=D(),c=E("",14);g&&(d=g[3],(f=F(g[2],f))&&f<14&&(c=E(d.substr(f),f)));a.C=a.c&&b>18E5?0:1;a.c?(b=D(),b[2]=C(),b[3]=c,a.c=b.join(".")):a.c=u()+"."+C()+"."+C()+"."+c;G("_chartbeat2",a.c,30);b=D();c=b[3];F(b[1],b[2])<14&&(c=c.substr(c.indexOf("1")));b=Math.round(c.length/c.replace(/0/g,"").length*10)/10;a.A=b;a.d?H(a.d):a.d=new I}h.G=function(a,b){this.v=i.location.protocol+"//"+this.a.domain+this.a.path;this.a.path=a;b&&(this.a.title=b);i.clearInterval(this.j);q(this);A(this)};
h.w=function(a){this.i=a};h.l=function(){var a=i._sf_startpt,b=i._sf_endpt;if(typeof a=="number")this.r=typeof b=="number"?b-a:C()-a;this.j=i.setInterval(p(this,this.q),15E3);this.q()};h.D=function(){var a=this.s,b=m();if(b)b._cb_cp+=(b._cb_cp?",":"")+a;else if(!i.name)i.name="_cb_cp"+a};function J(a,b){var c;c=new Image(1,1);c.onerror=a.z;c.src=b}
h.F=function(){this.f.push(1);for(var a=0,b=0;b<this.f.length;++b)a+=this.f[b];a<3?(this.m=e,K(this)):(clearInterval(this.j),G("_SUPERFLY_nosample","1",0.0070))};function K(a){var b=a.g,b=b?Math.min(b*2,16):1;a.g=b}h.q=function(){var a;a:{a=this.d;for(var b=0;b<a.h.length;b++)if(a.b[a.e][a.h[b]]){a=e;break a}a=false}L(this.d);this.k<this.g&&!a?this.k++:(a?(this.g=0,this.n+=15):K(this),this.k=0,N(this),C()-this.u>=this.p&&i.clearInterval(this.j))};
function O(){var a=document.body,b=document.documentElement;if(typeof i.pageYOffset=="number")return i.pageYOffset;else if(a&&a.scrollTop)return a.scrollTop;else if(b&&b.scrollTop)return b.scrollTop;return 0}
function N(a){function b(a,b,c){return(b=k[b]||k[c])?"&g"+a+"="+encodeURIComponent(b):""}var c=O(),d=0,f=0,g=0,M=Math.round((C()-a.u)/600)/100;P(a.d,"onkeydown")?f=1:P(a.d,"onmousemove")||P(a.d,"onscroll")||M<0.1?d=1:g=1;var k=a.a,o="",j="",y=i.location;if(a.m)a.m=false,a.v?(o=a.v,j=e):(o=document.referrer||"",j=o.indexOf("://"+y.host+"/"),j=j!=-1&&j<9),o=(j?"&v=":"&r=")+encodeURIComponent(o),j="&i="+Q(k.title.slice(0,100));var X=a.r?"&b="+a.r:"",Y=a.i?"&A="+a.i:"",r=l(),r=r?"&D="+r:"";a.f.push(0);
a.f.length>18&&a.f.shift();var z=[],s;for(s in a.a)s.charAt(0)=="_"&&z.push(s+"="+a.a[s]);J(a,(y.protocol||"http:")+"//"+k.pingServer+"/ping?h="+encodeURIComponent(k.domain)+"&p="+encodeURIComponent(k.path)+"&u="+a.c+"&d="+Q(y.host.replace(/^www\./,""))+"&g="+k.uid+b(0,"sections","categories")+b(1,"authors","brands")+"&n="+a.C+"&f="+a.A+"&c="+M+"&x="+c+"&y="+(document.body.scrollHeight||0)+"&w="+(i.innerHeight||document.body.offsetHeight||0)+"&j="+Math.round((a.g+2)*15E3/1E3)+"&R="+d+"&W="+f+"&I="+
g+"&E="+a.n+o+X+Y+w(a,"C","utm_campaign","campaignTag")+w(a,"M","utm_medium","mediumTag")+"&t="+a.s+"&V=3"+r+j+(z.length?"&"+z.join("&"):"")+"&_")};function I(){this.h=[];R(this,i,"onscroll");R(this,document.body,"onkeydown");R(this,document.body,"onmousemove");H(this)}function H(a){a.b=[{},{},{},{}];a.e=0;L(a)}function R(a,b,c){var d=b[c]||function(){};a.h.push(c);b[c]=function(b){d.apply(this,arguments);if(b&&c=="onkeydown"){var g=b.keyCode?b.keyCode:b.which;if(g==32||g>36&&g<41){a.b[a.e].onscroll++;return}}a.b[a.e][c]++}}function P(a,b){for(var c=0,d=0;d<a.b.length;d++)c+=a.b[d][b]||0;return c}
function L(a){a.e=(a.e+1)%a.b.length;for(var b=0;b<a.h.length;b++)a.b[a.e][a.h[b]]=0};function B(a){a+="=";for(var b=document.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];d.charAt(0)==" ";)d=d.substring(1,d.length);if(d.indexOf(a)==0)return d.substring(a.length,d.length)}return null}function G(a,b,c){var d=new Date;d.setTime(C()+c*864E5);document.cookie=a+"="+b+("; expires="+d.toGMTString())+"; path=/"};function m(){if(S!==void 0)return S;try{var a=i.localStorage;if(a.removeItem)return S=a}catch(b){}return S=null}var S;function t(a,b,c){a.addEventListener?a.addEventListener(b,c,false):a.attachEvent&&a.attachEvent("on"+b,c)}function F(a,b){var c=Math,d=parseInt;return c.abs(c.floor((d(b,10)-d(a,10))/864E5))}function E(a,b){for(;b--;)a+=b==0?1:0;return a}function D(){return(B("_chartbeat2")||"").split(".")}function C(){return(new Date).getTime()}function Q(a){return encodeURIComponent(a)};function T(a){var b=document.createElement("script");b.async=e;b.src=a;a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)}function U(a){if(/[\/|\.]chartbeat.com$/.test(a.origin)){var b=m(),c=String(a.data);if(b&&c.indexOf("_cb_ip")==0)c=c.substr(6),b._cb_ip=c,a.source.postMessage(1,a.origin),c&&T(c)}};var V=new n;i.pSUPERFLY=V;n.prototype.virtualPage=n.prototype.G;n.prototype.activity=n.prototype.w;A(V);var W=m();if(W){t(window,"message",U);var Z=W._cb_ip;Z&&T(Z)};})();
